<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for libs/min.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">libs/</a> min.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">69.05% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>1080/1564</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">47.09% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>591/1255</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">70.08% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>459/655</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>2/2</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2814×</span>
<span class="cline-any cline-yes">698×</span></td><td class="text"><pre class="prettyprint lang-js">/*!
 * MinDB (version 0.1.15) - Database on JavaScript
 * 
 * Will Wen Gunn(iwillwen) and other contributors
 * 
 * @license MIT-license
 * @copyright 2012-2015 iwillwen(willwengunn@gmail.com)
 */
!function(e,t){"object"==typeof exports&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >"object"==typeof module?<span class="branch-0 cbranch-no" title="branch not covered" ></span>module.exports=t():</span>"function"==typeof define&amp;&amp;define.amd?define("min",[],t):<span class="branch-1 cbranch-no" title="branch not covered" >"object"==typeof exports?exports.min=t():e.min=t()}</span>(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(5)["default"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={noop:function(){return!1},inherits:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}</span>,extend:function(e){for(var t=arguments.length,n=Array(t&gt;1?t-1:0),r=1;t&gt;r;r++)n[r-1]=arguments[r];for(var i=0,s=n.length;s&gt;i;i++)for(var u=Object.getOwnPropertyNames(n[i]||{}),o=0;o&lt;u.length;o++)e[u[o]]=n[i][u[o]];return e},isNumber:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return"[object Number]"==toString.call(e)}</span>,isUndefined:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return void 0===e}</span>,isObject:function(e){return e===Object(e)},arrayUnique:function(e){for(var t={},r=[],i=0,s=e.length;s&gt;i;++i)(!t.hasOwnProperty(e[i])||n.isObject(e[i]))&amp;&amp;(r.push(e[i]),t[e[i]]=1);return r},arrayInter:function(e){for(var t=arguments.length,r=Array(t&gt;1?t-1:0),i=1;t&gt;i;i++)r[i-1]=arguments[i];return n.arrayUnique(e).filter(function(e){var t=!0,n=!0,i=!1,s=void 0;try{for(var u,o=r[Symbol.iterator]();!(n=(u=o.next()).done);n=!0){var a=u.value;a.indexOf(e)&lt;0&amp;&amp;(t=!1)}}catch(c){<span class="cstat-no" title="statement not covered" >i=!0,s=c}</span>finally{try{!n&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >o["return"]&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >o["return"]()}</span>finally{<span class="missing-if-branch" title="if path not taken" >I</span>if(i)<span class="cstat-no" title="statement not covered" >throw s}</span>}return t})},arrayDiff:function(e){for(var t=arguments.length,r=Array(t&gt;1?t-1:0),i=1;t&gt;i;i++)r[i-1]=arguments[i];var s=n.arrayInter.apply(n,[e].concat(r)),u=n.arrayUnique(e.concat.apply(e,r));return u.filter(function(e){return s.indexOf(e)&lt;0})},flatten:function(e){<span class="fstat-no" title="function not covered" >function t(t,n,r,i){<span class="cstat-no" title="statement not covered" ></span>return e.apply(this,arguments)}</span>return t.toString=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return e.toString()}</span>,t}(<span class="fstat-no" title="function not covered" >function(e,t,n,r){<span class="cstat-no" title="statement not covered" ></span>for(var i=[],s=0,u=r||0,o=getLength(e);o&gt;u;u++){<span class="cstat-no" title="statement not covered" >var a=e[u];<span class="cstat-no" title="statement not covered" >i</span>f(isArrayLike(a)&amp;&amp;(_.isArray(a)||_.isArguments(a))){<span class="cstat-no" title="statement not covered" >t||(a=flatten(a,t,n));<span class="cstat-no" title="statement not covered" >v</span>ar c=0,l=a.length;<span class="cstat-no" title="statement not covered" >f</span>or(i.length+=l;l&gt;c;)<span class="cstat-no" title="statement not covered" >i[s++]=a[c++]}</span></span>else <span class="cstat-no" title="statement not covered" >n||(i[s++]=a)}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn i}</span>)};t["default"]=n},function(e,t,n){(function(e){"use strict";function r(e){return e&amp;&amp;e.__esModule?e:<span class="branch-1 cbranch-no" title="branch not covered" >{"default":e}}</span>function i(e){return e&amp;&amp;"undefined"!=typeof Symbol&amp;&amp;e.constructor===Symbol?<span class="branch-0 cbranch-no" title="branch not covered" >"symbol":</span>typeof e}<span class="fstat-no" title="function not covered" >function s(e,t){<span class="cstat-no" title="statement not covered" ></span>if(!(e instanceof t))<span class="cstat-no" title="statement not covered" >throw new TypeError("Cannot call a class as a function")}</span></span>function u(e){var t=null,n=l,r=l;return e=e||l,m?(t=new m(function(t,i){n=t,r=i,e(t,i)}),t.resolve=function(){for(var e=arguments.length,r=Array(e),i=0;e&gt;i;i++)r[i]=arguments[i];n.apply(t,r)},t.reject=function(){for(var e=arguments.length,n=Array(e),i=0;e&gt;i;i++)n[i]=arguments[i];r.apply(t,n)}):<span class="branch-1 cbranch-no" title="branch not covered" >t=new v(e),</span>t}var o=function(){function e(e,t){for(var n=0;n&lt;t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&amp;&amp;(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&amp;&amp;e(t.prototype,n),r&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >e(t,r),</span>t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0,t.Promise=u;var a=n(1),c=r(a),l=c["default"].noop,f=10,h=t.EventEmitter=function(){<span class="fstat-no" title="function not covered" >function e(){<span class="cstat-no" title="statement not covered" ></span>s(this,e),this._events=this._events||{},this._maxListeners=this._maxListeners||f}</span>return o(e,[{key:"setMaxListeners",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if("number"!=typeof e||0&gt;e)<span class="cstat-no" title="statement not covered" >throw TypeError("n must be a positive number");<span class="cstat-no" title="statement not covered" >t</span></span>his._maxListeners=e}</span>},{key:"emit",value:function(e){var t=void 0,n=void 0,r=void 0,s=void 0,u=void 0,o=void 0;<span class="missing-if-branch" title="if path not taken" >I</span>if(this._events||(this._events={}),"error"===e&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >!this._events.error|</span>|<span class="branch-2 cbranch-no" title="branch not covered" >"object"===i(this._events.error)&amp;</span>&amp;<span class="branch-3 cbranch-no" title="branch not covered" >!this._events.error.length)</span>){<span class="cstat-no" title="statement not covered" >if(t=arguments[1],!this.domain)<span class="cstat-no" title="statement not covered" >throw t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');<span class="cstat-no" title="statement not covered" >r</span></span>eturn t||(t=new TypeError('Uncaught, unspecified "error" event.')),!1}</span>if(n=this._events[e],"undefined"==typeof n)return!1;if("function"==typeof n)switch(arguments.length){<span class="branch-0 cbranch-no" title="branch not covered" >case 1:<span class="cstat-no" title="statement not covered" >n.call(this);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span></span>ase 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;<span class="branch-3 cbranch-no" title="branch not covered" >default:<span class="cstat-no" title="statement not covered" >for(r=arguments.length,s=new Array(r-1),u=1;r&gt;u;u++)<span class="cstat-no" title="statement not covered" >s[u-1]=arguments[u];<span class="cstat-no" title="statement not covered" >n</span></span>.apply(this,s)}</span></span>else <span class="missing-if-branch" title="else path not taken" >E</span>if("object"===("undefined"==typeof n?<span class="branch-0 cbranch-no" title="branch not covered" >"undefined":</span>i(n))){for(r=arguments.length,s=new Array(r-1),u=1;r&gt;u;u++)s[u-1]=arguments[u];for(o=n.slice(),r=o.length,u=0;r&gt;u;u++)o[u].apply(this,s)}return!0}},{key:"addListener",value:function(e,t){var n=void 0;<span class="missing-if-branch" title="if path not taken" >I</span>if("function"!=typeof t)<span class="cstat-no" title="statement not covered" >throw TypeError("listener must be a function");r</span>eturn this._events||(<span class="branch-1 cbranch-no" title="branch not covered" >this._events={})</span>,this._events.newListener&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >this.emit("newListener",e,"function"==typeof t.listener?t.listener:t),</span>this._events[e]?"object"===i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,"object"!==i(this._events[e])||this._events[e].warned||(n=this._maxListeners,n&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >n&gt;0&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >this._events[e].length&gt;n&amp;</span>&amp;(<span class="branch-3 cbranch-no" title="branch not covered" >this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())</span>),this}},{key:"once",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="fstat-no" title="function not covered" ></span>function n(){<span class="cstat-no" title="statement not covered" ></span>this.removeListener(e,n),t.apply(this,arguments)}<span class="cstat-no" title="statement not covered" ></span>if("function"!=typeof t)<span class="cstat-no" title="statement not covered" >throw TypeError("listener must be a function");<span class="cstat-no" title="statement not covered" >r</span></span>eturn n.listener=t,this.on(e,n),this}</span>},{key:"removeListener",value:function(e,t){var n=void 0,r=void 0,s=void 0,u=void 0;<span class="missing-if-branch" title="if path not taken" >I</span>if("function"!=typeof t)<span class="cstat-no" title="statement not covered" >throw TypeError("listener must be a function");i</span>f(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||"function"==typeof n.listener&amp;&amp;<span class="branch-2 cbranch-no" title="branch not covered" >n.listener===t)</span>this._events[e]=void 0,this._events.removeListener&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >this.emit("removeListener",e,t);</span>else <span class="missing-if-branch" title="else path not taken" >E</span>if("object"===("undefined"==typeof n?<span class="branch-0 cbranch-no" title="branch not covered" >"undefined":</span>i(n))){for(u=s;u-- &gt;0;)if(n[u]===t||n[u].listener&amp;&amp;<span class="branch-2 cbranch-no" title="branch not covered" >n[u].listener===t)</span>{r=u;break}if(0&gt;r)return this;1===n.length?(<span class="branch-0 cbranch-no" title="branch not covered" >n.length=0,this._events[e]=void 0)</span>:n.splice(r,1),this._events.removeListener&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >this.emit("removeListener",e,t)}</span>return this}},{key:"removeAllListeners",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(!this._events)<span class="cstat-no" title="statement not covered" >return this;<span class="cstat-no" title="statement not covered" >i</span></span>f(!this._events.removeListener)<span class="cstat-no" title="statement not covered" >return 0===arguments.length?this._events={}:this._events[e]&amp;&amp;(this._events[e]=void 0),this;<span class="cstat-no" title="statement not covered" >i</span></span>f(0===arguments.length){<span class="cstat-no" title="statement not covered" >for(var t=Object.keys(this._events),n=0;n&lt;t.length;n++){<span class="cstat-no" title="statement not covered" >var r=t[n];<span class="cstat-no" title="statement not covered" >"</span>removeListener"!==r&amp;&amp;this.removeAllListeners(r)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this.removeAllListeners("removeListener"),this._events={},this}<span class="cstat-no" title="statement not covered" ></span>v</span>ar i=this._events[e];<span class="cstat-no" title="statement not covered" >i</span>f("function"==typeof i)<span class="cstat-no" title="statement not covered" >this.removeListener(e,i);e</span>lse <span class="cstat-no" title="statement not covered" >for(;i.length;)<span class="cstat-no" title="statement not covered" >this.removeListener(e,i[i.length-1]);<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn this._events[e]=void 0,this}</span>},{key:"listeners",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=void 0;<span class="cstat-no" title="statement not covered" >r</span>eturn t=this._events&amp;&amp;this._events[e]?"function"==typeof this._events[e]?[this._events[e]]:this._events[e].slice():[]}</span>}]),e}();h.prototype.on=h.prototype.addListener,h.listenerCount=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=void 0;<span class="cstat-no" title="statement not covered" >r</span>eturn n=e._events&amp;&amp;e._events[t]?"function"==typeof e._events[t]?1:e._events[t].length:0}</span>,h.inherits=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>c["default"].inherits(e,h)}</span>;var v=function(){<span class="fstat-no" title="function not covered" >function e(){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=0||void 0===arguments[0]?l:arguments[0];<span class="cstat-no" title="statement not covered" >s</span>(this,e),this._settled=!1,this._success=!1,this._args=[],this._callbacks=[],this._onReject=l,t(this.resolve.bind(this),this.reject.bind(this))}</span>return o(e,[{key:"then",value:<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=1||void 0===arguments[1]?l:arguments[1],i=new e;<span class="cstat-no" title="statement not covered" >r</span>eturn this._onReject=r,this._callbacks.push(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,r=Array(e),s=0;e&gt;s;s++)<span class="cstat-no" title="statement not covered" >r[s]=arguments[s];<span class="cstat-no" title="statement not covered" >v</span></span>ar u=t.apply(n,r);<span class="cstat-no" title="statement not covered" >u</span>&amp;&amp;"function"==typeof u.then&amp;&amp;u.then(i.resolve.bind(i),i.reject.bind(i))}</span>),this._settled&amp;&amp;(this._success?this.resolve.apply(this,this._args):this.onReject.apply(this,this._args)),i}</span>},{key:"catch",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return this._onReject=e,this}</span>},{key:"resolve",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,t=Array(e),n=0;e&gt;n;n++)<span class="cstat-no" title="statement not covered" >t[n]=arguments[n];<span class="cstat-no" title="statement not covered" >f</span></span>or(var r=0;r&lt;this._callbacks.length;r++){<span class="cstat-no" title="statement not covered" >var i=this._callbacks[r];<span class="cstat-no" title="statement not covered" >i</span>.apply(this,t)}<span class="cstat-no" title="statement not covered" ></span>t</span>his._args=t,this._settled=!0,this._success=!0}</span>},{key:"reject",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,t=Array(e),n=0;e&gt;n;n++)<span class="cstat-no" title="statement not covered" >t[n]=arguments[n];<span class="cstat-no" title="statement not covered" >t</span></span>his._onReject.apply(this,t),this._args=t,this._settled=!0}</span>}]),e}(),m=(e||<span class="branch-1 cbranch-no" title="branch not covered" >window)</span>.Promise||<span class="branch-1 cbranch-no" title="branch not covered" >null}</span>).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&amp;&amp;e.__esModule?e:<span class="branch-1 cbranch-no" title="branch not covered" >{"default":e}}</span>var i=function(){<span class="fstat-no" title="function not covered" >function e(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=[],r=!0,i=!1,s=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var u,o=e[Symbol.iterator]();!(r=(u=o.next()).done)&amp;&amp;(n.push(u.value),!t||n.length!==t);r=!0);}</span>catch(a){<span class="cstat-no" title="statement not covered" >i=!0,s=a}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw s}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}</span>return function(t,n){if(Array.isArray(t))return t;<span class="missing-if-branch" title="if path not taken" >I</span>if(Symbol.iterator in Object(t))<span class="cstat-no" title="statement not covered" >return e(t,n);t</span>hrow new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),o=n(2),a=u["default"].noop,c={};t["default"]=c,c.hset=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new o.Promise;return this.exists(e,function(u,o){<span class="missing-if-branch" title="if path not taken" >I</span>if(u)<span class="cstat-no" title="statement not covered" >return s.reject(u),i(u);i</span>f(o)r.get(e,function(u,o){return u?(<span class="branch-0 cbranch-no" title="branch not covered" >s.reject(u),i(u))</span>:(o[t]=n,void r.set(e,o,function(r){return r?(<span class="branch-0 cbranch-no" title="branch not covered" >s.reject(r),i(r))</span>:(s.resolve([e,t,n]),void i(null,e,t,n))}))});else{var a={};a[t]=n,r.set(e,a,function(u){return u?(<span class="branch-0 cbranch-no" title="branch not covered" >reject(u),i(u))</span>:(r._keys[e]=1,s.resolve([e,t,n]),void i(null,e,t,n))})}}),s.then(function(i){return r.emit("hset",e,t,n)}),s},c.hsetnx=function(e,t,n){var r=this,s=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>u=new o.Promise;return this.hexists(e,t,function(o,a){<span class="missing-if-branch" title="if path not taken" >I</span>if(o)<span class="cstat-no" title="statement not covered" >return u.reject(o),s(o);i</span>f(a){var c=new Error("The field of the hash is exists");return u.reject(c),s(c)}r.hset(e,t,n).then(function(e){var t=i(e,3),n=t[0],r=t[1],o=t[2];u.resolve([n,r,o]),s(null,n,r,o)})}),u},c.hmset=function(e,t){function n(){h.length&gt;0?(<span class="branch-0 cbranch-no" title="branch not covered" >s(h),u.reject(h))</span>:(s(null,f),u.resolve(f))}var r=this,s=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>u=new o.Promise,c=Object.keys(t),l=0,f=[],h=[],v=function m(s,u){delete c[u],r.hset(e,s,t[s]).then(function(e){var t=i(e,3),r=t[0],s=t[1],u=t[2];f.push([r,s,u]),l++,c[l]?m(c[l],l):n()},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return h.push(e),l++,c[l]?m(c[l],l):n()}</span>)};return v(c[l],l),u},c.hget=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new o.Promise;return this.hexists(e,t,function(s,u){<span class="missing-if-branch" title="if path not taken" >I</span>if(s)<span class="cstat-no" title="statement not covered" >return i.reject(s),r(s);i</span>f(u)n.get(e).then(function(e){var n=e[t];i.resolve(n),r(null,n)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>);else{var o=new Error("no such field");i.reject(o),r(o)}}),i},c.hmget=function(e,t){var n=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>r=new o.Promise,i=this.multi();return t.forEach(function(t){i.hget(e,t)}),i.exec(function(e,t){return e?(n(e),r.reject(e)):(r.resolve(t),void n(null,t))}),r},c.hgetall=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new o.Promise;return this.exists(e,function(i,s){<span class="missing-if-branch" title="if path not taken" >I</span>if(i)<span class="cstat-no" title="statement not covered" >return n(i),r.reject(i);i</span>f(!s){var u=new Error("no such key");return n(u),r.reject(u)}t.get(e).then(function(e){r.resolve(e),n(null,e)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>)}),r},c.hdel=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>s=new o.Promise;return s.then(function(e){var t=i(e,3),r=t[0],s=t[1],u=t[2];n.emit("hdel",r,s,u)}),this.hexists(e,t,function(i,u){<span class="missing-if-branch" title="if path not taken" >I</span>if(i)<span class="cstat-no" title="statement not covered" >return r(i),s.reject(i);i</span>f(!u){var o=new Error("no such key");return r(o),s.reject(o)}n.get(e).then(function(i){var u=i[t];delete i[t],n.set(e,i).then(function(n){s.resolve([e,t,u]),r(null,e,t,u)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),r(e)}</span>)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return r(e)}</span>)}),s},c.hlen=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new o.Promise;return this.exists(e,function(i,s){return i?(<span class="branch-0 cbranch-no" title="branch not covered" >r.reject(i),n(i))</span>:void(s?t.get(e).then(function(e){var t=Object.keys(e).length;r.resolve(t),n(null,t)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>):(r.resolve(0),n(null,0)))}),r},c.hkeys=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new o.Promise;return this.exists(e,function(i,s){return i?(<span class="branch-0 cbranch-no" title="branch not covered" >r.reject(i),n(i))</span>:void(s?t.get(e).then(function(e){var t=Object.keys(e);r.resolve(t),n(null,t)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>):(r.resolve([]),n(null,[])))}),r},c.hexists=function(e,t){var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?a:arguments[2],i=new o.Promise;return this.exists(e).then(function(t){return t?n.get(e):(i.resolve(!1),void r(null,!1))}).then(function(e){e.hasOwnProperty(t)?(i.resolve(!0),r(null,!0)):(i.resolve(!1),r(null,!1))},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i},c.hincr=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>s=new o.Promise;return s.then(function(r){return n.emit("hincr",e,t,r)}),this.hexists(e,t).then(function(r){if(r)return n.hget(e,t);var i=new o.Promise;return i.resolve(0),i}).then(function(i){if(isNaN(parseFloat(i))){var u=new Error("value wrong");return s.reject(u),r(u)}return i=parseFloat(i),n.hset(e,t,++i)}).then(function(e){var t=i(e,3),n=t[2];s.resolve(n),r(null,n)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),r(null,e)}</span>),s},c.hincrby=function(e,t,n){var r=this,s=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>u=new o.Promise;return u.then(function(n){r.emit("hincr",e,t,n)}),this.hexists(e,t).then(function(n){if(n)return r.hget(e,t);var i=new o.Promise;return i.resolve(0),i}).then(function(i){if(isNaN(parseFloat(i))){var o=new Error("value wrong");return u.reject(o),s(o)}return i=parseFloat(i),r.hset(e,t,i+n)}).then(function(e){var t=i(e,3),n=t[2];u.resolve(n),s(null,n)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),s(null,e)}</span>),u},c.hincrbyfloat=c.hincrby,c.hdecr=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>s=new o.Promise;return s.then(function(r){n.emit("hdecr",e,t,r)}),this.hexists(e,t).then(function(r){if(r)return n.hget(e,t);var i=new o.Promise;return i.resolve(0),i}).then(function(i){if(isNaN(parseFloat(i))){var u=new Error("value wrong");return s.reject(u),r(u)}return i=parseFloat(i),n.hset(e,t,--i)}).then(function(e){var t=i(e,3),n=t[2];s.resolve(n),r(null,n)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),r(e)}</span>),s},c.hdecrby=function(e,t,n){var r=this,s=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>u=new o.Promise;return u.then(function(n){return r.emit("hincr",e,t,n)}),this.hexists(e,t).then(function(n){if(n)return r.hget(e,t);var i=new o.Promise;return i.resolve(0),i}).then(function(i){if(isNaN(parseFloat(i))){var o=new Error("value wrong");return u.reject(o),s(o)}return i=parseFloat(i),r.hset(e,t,i-n)}).then(function(e){var t=i(e,3),n=t[2];u.resolve(n),s(null,n)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),s(null,e)}</span>),u},c.hdecrbyfloat=c.hdecrby},function(e,t,n){"use strict";function r(e){return e&amp;&amp;e.__esModule?e:<span class="branch-1 cbranch-no" title="branch not covered" >{"default":e}}</span>function i(e){<span class="missing-if-branch" title="else path not taken" >E</span>if(Array.isArray(e)){for(var t=0,n=Array(e.length);t&lt;e.length;t++)n[t]=e[t];return n}<span class="cstat-no" title="statement not covered" >return Array.from(e)}</span>var s=function(){<span class="fstat-no" title="function not covered" >function e(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=[],r=!0,i=!1,s=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var u,o=e[Symbol.iterator]();!(r=(u=o.next()).done)&amp;&amp;(n.push(u.value),!t||n.length!==t);r=!0);}</span>catch(a){<span class="cstat-no" title="statement not covered" >i=!0,s=a}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw s}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}</span>return <span class="fstat-no" title="function not covered" >function(t,n){<span class="cstat-no" title="statement not covered" ></span>if(Array.isArray(t))<span class="cstat-no" title="statement not covered" >return t;<span class="cstat-no" title="statement not covered" >i</span></span>f(Symbol.iterator in Object(t))<span class="cstat-no" title="statement not covered" >return e(t,n);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new TypeError("Invalid attempt to destructure non-iterable instance")}</span>}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=r(u),a=n(2),c=o["default"].noop,l={};t["default"]=l,l.lpush=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)r[i-1]=arguments[i];var s=new a.Promise,u=c;return r[r.length-1].apply&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >u=r.splice(r.length-1)[0])</span>,s.then(function(n){return t.emit("lpush",e,r,n)}),this.exists(e,function(n,i){<span class="missing-if-branch" title="if path not taken" >I</span>if(n)<span class="cstat-no" title="statement not covered" >return s.reject(n),u(n);i</span>f(i)t.get(e,function(n,i){return n?(<span class="branch-0 cbranch-no" title="branch not covered" >s.reject(n),u(n))</span>:(i.unshift.apply(i,r),void t.set(e,i,function(e){<span class="missing-if-branch" title="if path not taken" >I</span>if(e)<span class="cstat-no" title="statement not covered" >return s.reject(e),u(e);v</span>ar t=i.length;s.resolve(t),u(null,t)}))});else{var o=r.slice();t.set(e,o,function(n){return n?(<span class="branch-0 cbranch-no" title="branch not covered" >s.reject(n),u(n))</span>:(t._keys[e]=2,s.resolve(1),void u(null,1))})}}),s},l.lpushx=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)r[i-1]=arguments[i];var s=new a.Promise,u=c;return r[r.length-1].apply&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >u=r.splice(r.length-1)[0])</span>,s.then(function(n){return t.emit("lpush",e,r,n)}),this.exists(e,function(n,i){<span class="missing-if-branch" title="if path not taken" >I</span>if(n)<span class="cstat-no" title="statement not covered" >return s.reject(n),u(n);i</span>f(!i){var o=new Error("no such key");return u(o),s.reject(o)}t.get(e,function(n,i){<span class="missing-if-branch" title="if path not taken" >I</span>if(n)<span class="cstat-no" title="statement not covered" >return s.reject(n),u(n);i</span>f(!i.length){var n=new Error("The list is empty.");return u(n),s.reject(n)}i.unshift.apply(i,r),t.set(e,i,function(e){<span class="missing-if-branch" title="if path not taken" >I</span>if(e)<span class="cstat-no" title="statement not covered" >return s.reject(e),u(e);v</span>ar t=i.length;s.resolve(t),u(null,t)})})}),s},l.rpush=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)r[i-1]=arguments[i];var s=new a.Promise,u=c;return r[r.length-1].apply&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >u=r.splice(r.length-1)[0])</span>,s.then(function(n){return t.emit("rpush",e,r,n)}),this.exists(e,function(n,i){<span class="missing-if-branch" title="if path not taken" >I</span>if(n)<span class="cstat-no" title="statement not covered" >return s.reject(n),u(n);i</span>f(i)t.get(e,function(n,i){return n?(<span class="branch-0 cbranch-no" title="branch not covered" >s.reject(n),u(n))</span>:(i.push.apply(i,r),void t.set(e,i,function(e){<span class="missing-if-branch" title="if path not taken" >I</span>if(e)<span class="cstat-no" title="statement not covered" >return s.reject(e),u(e);v</span>ar t=i.length;s.resolve(t),u(null,t)}))});else{var o=r.slice();t.set(e,o,function(e){return e?(<span class="branch-0 cbranch-no" title="branch not covered" >s.reject(e),u(e))</span>:(s.resolve(1),void u(null,1))})}}),s},l.rpushx=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)r[i-1]=arguments[i];var s=new a.Promise,u=c;return r[r.length-1].apply&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >u=r.splice(r.length-1)[0])</span>,s.then(function(n){return t.emit("rpush",e,r,n)}),this.exists(e,function(n,i){<span class="missing-if-branch" title="if path not taken" >I</span>if(n)<span class="cstat-no" title="statement not covered" >return s.reject(n),u(n);i</span>f(!i){var o=new Error("no such key");return u(o),s.reject(o)}t.get(e,function(n,i){<span class="missing-if-branch" title="if path not taken" >I</span>if(n)<span class="cstat-no" title="statement not covered" >return s.reject(n),u(n);i</span>f(!i.length){var o=new Error("The list is empty.");return u(o),s.reject(o)}i.push.apply(i,r),t.set(e,i,function(e){<span class="missing-if-branch" title="if path not taken" >I</span>if(e)<span class="cstat-no" title="statement not covered" >return s.reject(e),u(e);v</span>ar t=i.length;s.resolve(t),u(null,t)})})}),s},l.lpop=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new a.Promise,i=null;return r.then(function(n){return t.emit("lpop",e,n)}),this.exists(e).then(function(i){return i?t.get(e):(r.resolve(null),void n(null,null))}).then(function(n){return i=n.shift(),t.set(e,n)}).then(function(e){r.resolve(i),n(null,i)},function(e){r.reject(e),n(e)}),r},l.rpop=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new a.Promise;r.then(function(n){return t.emit("rpop",e,n)});var i=null;return this.exists(e).then(function(i){return i?t.get(e):(r.resolve(null),void n(null,null))}).then(function(n){return i=n.pop(),t.set(e,n)}).then(function(e){r.resolve(i),n(null,i)},function(e){r.reject(e),n(e)}),r},l.llen=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new a.Promise;return this.exists(e,function(i,s){return i?(<span class="branch-0 cbranch-no" title="branch not covered" >r.reject(i),n(i))</span>:void(s?t.get(e,function(e,t){<span class="missing-if-branch" title="if path not taken" >I</span>if(e)<span class="cstat-no" title="statement not covered" >return r.reject(e),n(e);v</span>ar i=t.length;r.resolve(i),n(null,i)}):(r.resolve(0),n(null,0)))}),r},l.lrange=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new a.Promise;return this.exists(e,function(u,o){return u?(<span class="branch-0 cbranch-no" title="branch not covered" >s.reject(u),i(u))</span>:void(o?r.get(e,function(e,r){<span class="missing-if-branch" title="if path not taken" >I</span>if(e)<span class="cstat-no" title="statement not covered" >return s.reject(e),i(e);0</span>&gt;n&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >n=r.length+n)</span>;var u=r.slice(t,n+1);s.resolve(u),i(null,u)}):(s.resolve([]),i(null,[])))}),s},l.lrem=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new a.Promise;s.then(function(i){return r.emit("lrem",e,t,n,i)});var u=0;return this.exists(e).then(function(t){return t?r.get(e):(s.resolve(0),void i(null,0))}).then(function(i){switch(!0){case t&gt;0:for(var s=0;s&lt;i.length&amp;&amp;t&gt;u;s++)i[s]===n&amp;&amp;(i.splice(s,1)[0],u++);break;case 0&gt;t:for(var s=i.length-1;s&gt;=0&amp;&amp;-t&gt;u;s--)i[s]===n&amp;&amp;(i.splice(s,1)[0],u++);break;case 0==t:for(var s=i.length-1;s&gt;=0;s--)i[s]===n&amp;&amp;(i.splice(s,1)[0],u++)}return r.set(e,i)}).then(function(){s.resolve(u),i(null,u)})["catch"](function(e){s.reject(e),i(e)}),s},l.lset=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new a.Promise;return s.then(function(i){return r.emit("lset",e,t,n,i)}),this.exists(e).then(function(t){if(t)return r.get(e);throw new Error("no such key")}).then(function(i){if(0&gt;t&amp;&amp;i.length&gt;0&amp;&amp;(t=i.length+t),!i[t]||!i.length)throw new Error("Illegal index");return i.length==t?<span class="branch-0 cbranch-no" title="branch not covered" >i.push(n):</span>i[t]=n,r.set(e,i)}).then(function(){s.resolve(),i(null)})["catch"](function(e){s.reject(e),i(e)}),s},l.ltrim=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new a.Promise;return this.exists(e).then(function(t){if(!t)throw new Error("no such key");return r.get(e)}).then(function(i){0&gt;t&amp;&amp;(t=i.length+t),0&gt;n&amp;&amp;(n=i.length+n);var s=i.slice(t,n+1);return r.set(e,s)}).then(function(){return r.get(e)}).then(function(t){s.resolve(t),i(null,t,e)})["catch"](function(e){s.reject(e),i(e)}),s},l.lindex=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new a.Promise;return this.exists(e).then(function(t){if(!t){var s=new Error("no such key");return i.reject(s),r(s)}return n.get(e)}).then(function(e){if(t&gt;e.length-1)throw new Error("Illegal index");var n=e[t];i.resolve(n),r(null,n)})["catch"](function(e){i.reject(e),r(e)}),i},l.linsertBefore=function(e,t,n){var r=this,s=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>u=new a.Promise;return u.then(function(i){return r.emit("linsertBefore",e,t,n,i)}),this.exists(e).then(function(t){<span class="missing-if-branch" title="else path not taken" >E</span>if(t)return r.get(e);<span class="cstat-no" title="statement not covered" >throw new Error("no such key")}</span>).then(function(o){var a=o.indexOf(t);<span class="missing-if-branch" title="if path not taken" >I</span>if(0&gt;a)<span class="cstat-no" title="statement not covered" >return u.resolve(-1),void s(null,-1);v</span>ar c=o.slice(0,a),l=o.slice(a),f=c.slice();return f.push.apply(f,[n].concat(i(l))),r.set(e,f)}).then(function(e){return e.substr?r.get(e):<span class="branch-1 cbranch-no" title="branch not covered" >void 0}</span>).then(function(e){u.resolve(e.length),s(null,e.length)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),s(e)}</span>),u},l.linsertAfter=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,s=arguments.length&lt;=3||void 0===arguments[3]?c:arguments[3],u=new a.Promise;<span class="cstat-no" title="statement not covered" >r</span>eturn u.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("linsertAfter",e,t,n,i)}</span>),this.exists(e).then(<span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>if(t)<span class="cstat-no" title="statement not covered" >return r.get(e);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new Error("no such key")}</span>).then(<span class="fstat-no" title="function not covered" >function(o){<span class="cstat-no" title="statement not covered" ></span>var a=o.indexOf(t)+1;<span class="cstat-no" title="statement not covered" >i</span>f(0&gt;a)<span class="cstat-no" title="statement not covered" >return u.resolve(-1),void s(null,-1);<span class="cstat-no" title="statement not covered" >v</span></span>ar c=o.slice(0,a),l=o.slice(a),f=c.slice();<span class="cstat-no" title="statement not covered" >r</span>eturn f.push.apply(f,[n].concat(i(l))),r.set(e,f)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e.substr?r.get(e):void 0}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.resolve(e.length),s(null,e.length)}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),s(e)}</span>),u}</span>,l.rpoplpush=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?c:arguments[2],i=new a.Promise,u=null;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>var i=s(r,2),u=i[0],o=i[1];<span class="cstat-no" title="statement not covered" >r</span>eturn n.emit("rpoplpush",e,t,u,o)}</span>),this.rpop(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return n.lpush(t,u=e)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.resolve([u,e]),r(null,u,e)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r(e),i.reject(e)}</span>),i}</span>,l.lpoprpush=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?c:arguments[2],i=new a.Promise,s=null;<span class="cstat-no" title="statement not covered" >r</span>eturn i.then(<span class="fstat-no" title="function not covered" >function(r,i){<span class="cstat-no" title="statement not covered" ></span>return n.emit("lpoprpush",e,t,r,i)}</span>),this.lpop(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return n.rpush(t,s=e)}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.resolve(s,e),r(null,s,e)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r(e),i.reject(e)}</span>),i}</span>},function(e,t,n){"use strict";function r(e){return e&amp;&amp;e.__esModule?e:<span class="branch-1 cbranch-no" title="branch not covered" >{"default":e}}</span>var i=function(){<span class="fstat-no" title="function not covered" >function e(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=[],r=!0,i=!1,s=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var u,o=e[Symbol.iterator]();!(r=(u=o.next()).done)&amp;&amp;(n.push(u.value),!t||n.length!==t);r=!0);}</span>catch(a){<span class="cstat-no" title="statement not covered" >i=!0,s=a}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw s}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}</span>return function(t,n){<span class="missing-if-branch" title="else path not taken" >E</span>if(Array.isArray(t))return t;<span class="cstat-no" title="statement not covered" >if(Symbol.iterator in Object(t))<span class="cstat-no" title="statement not covered" >return e(t,n);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new TypeError("Invalid attempt to destructure non-iterable instance")}</span>}();Object.defineProperty(t,"__esModule",{value:!0}),n(11);var s=n(1),u=r(s),o=n(2),a=n(7),c=r(a),l=n(3),f=r(l),h=n(4),v=r(h),m=n(8),g=r(m),d=n(10),p=r(d),y=n(6),w=r(y),b=n(9),j=u["default"].noop,x={};t["default"]=x,u["default"].extend(x,o.EventEmitter.prototype),x.EventEmitter=o.EventEmitter,x.Promise=o.Promise,x.memStore=b.memStore,x.localStore=b.localStore,x.store=new b.localStore;var _=x._keys={},k=null,P={0:"mix",1:"hash",2:"list",3:"set",4:"zset"};x.fork=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e={},t=Object.getOwnPropertyNames(this),n=0;n&lt;t.length;n++){<span class="cstat-no" title="statement not covered" >var r=t[n];<span class="cstat-no" title="statement not covered" >t</span>his.hasOwnProperty(r)&amp;&amp;(e[r]=this[r])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn e}</span>,x.del=function(e){var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?j:arguments[1],r=new o.Promise(j);r.then(function(){t.emit("del",e),k&amp;&amp;clearTimeout(k),k=setTimeout(t.save.bind(t),1e3)});var i=this.store,s="min-"+e;<span class="missing-if-branch" title="if path not taken" >I</span>if(i.async){<span class="cstat-no" title="statement not covered" >var u=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>i.remove(s,<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return i?(r.reject(i),n(i)):(delete t._keys[e],r.resolve(e),void n(null,e))}</span>)}</span>;<span class="cstat-no" title="statement not covered" >i</span>.ready?u():i.on("ready",u)}</span>else try{i.remove(s),delete this._keys[e],r.resolve(e),n(null,e)}catch(a){<span class="cstat-no" title="statement not covered" >r.reject(a),n(a)}</span>return r},x.exists=function(e){var t=arguments.length&lt;=1||void 0===arguments[1]?j:arguments[1],n=new o.Promise;e="min-"+e;var r=function(e,r){return e||!r?(n.resolve(!1),t(null,!1)):(n.resolve(!0),void t(null,!0))};<span class="missing-if-branch" title="if path not taken" >I</span>if(this.store.async)<span class="cstat-no" title="statement not covered" >this.store.get(e,r);e</span>lse{var i=this.store.get(e);r(null,i)}return n},x.renamenx=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>j:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new o.Promise(j);i.then(function(r){n.emit("rename",e,t),k&amp;&amp;clearTimeout(k),k=setTimeout(n.save.bind(n),5e3)});try{!function(){var s=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>,u=null,o=null;n.exists(e).then(function(t){<span class="missing-if-branch" title="else path not taken" >E</span>if(t)return n.get(e);<span class="cstat-no" title="statement not covered" >var r=new Error("no such key");<span class="cstat-no" title="statement not covered" >s</span>(r)}</span>).then(function(t){return u=n._keys[e],o=t,n.del(e)}).then(function(e){return n.set(t,o,r)}).then(function(e){n._keys[t]=u,i.resolve("OK"),r(null,"OK")},s)}()}catch(s){<span class="cstat-no" title="statement not covered" >reject(s)}</span>return i},x.rename=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>j:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new o.Promise(j);i.then(function(r){n.emit("rename",e,t),k&amp;&amp;clearTimeout(k),k=setTimeout(n.save.bind(n),5e3)});var s=function(e){i.reject(e),r(e)};return e==t?s(new Error("The key is equal to the new key.")):this.renamenx.apply(this,arguments).then(i.resolve.bind(i),i.reject.bind(i)),i},x.keys=function(e){for(var t=arguments.length&lt;=1||void 0===arguments[1]?j:arguments[1],n=new o.Promise,r=Object.keys(this._keys),i=new RegExp(e.replace("?","(.)").replace("*","(.*)")),s=[],u=0;u&lt;r.length;u++)r[u].match(i)&amp;&amp;s.push(r[u]);return n.resolve(s),t(null,s),n},x.randomkey=function(){var e=arguments.length&lt;=0||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[0]?</span>j:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[0],</span>t=new o.Promise(j),n=Object.keys(this._keys),r=Math.round(Math.random()*(n.length-1)),i=n[r];return t.resolve(i),e(null,i),t},x.type=function(e){var t=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>j:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>n=new o.Promise(j);return this._keys.hasOwnProperty(e)?(n.resolve(P[this._keys[e]]),t(null,t)):(<span class="branch-1 cbranch-no" title="branch not covered" >n.resolve(null),t(null,null))</span>,n},x.empty=function(){var e=this,t=arguments.length&lt;=0||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[0]?</span>j:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[0],</span>n=new o.Promise,r=Object.keys(this._keys),i=0;n.then(function(t){e.emit("empty",t),k&amp;&amp;clearTimeout(k),k=setTimeout(e.save.bind(e),5e3)});var s=function u(s){s?e.del(s,function(e){e||i++,u(r.shift())}):(n.resolve(i),t(null,i))};return s(r.shift()),n},x.save=function(){var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?j:arguments[0],n=new o.Promise;return n.then(function(t){var n=i(t,2),r=n[0],s=n[1];e.emit("save",r,s)}),this.set("min_keys",JSON.stringify(this._keys)).then(function(t){return e.dump()}).then(function(e){var r=i(e,2),s=r[0],u=r[1];n.resolve([s,u]),t(s,u)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.reject(e),t(e)}</span>),n},x.dump=function(){var e=this,t=arguments.length&lt;=0||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[0]?</span>j:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[0],</span>n=null,r=new o.Promise,i={};return this.keys("*",function(s,u){return s?(<span class="branch-0 cbranch-no" title="branch not covered" >r.reject(s),t(s))</span>:void(n=function(s){if(s)e.get(s).then(function(e){i[s]=e,n(u.shift())},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),t(e)}</span>);else{var o=JSON.stringify(i);r.resolve([i,o]),t(null,i,o)}})(u.shift())}),r},x.restore=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>j:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new o.Promise;r.then(function(e){t.save(function(e){t.emit("restore")})});var i=Object.keys(e),s=function(e){t.exists("min_keys").then(function(e){return e?t.get("min_keys"):(<span class="branch-1 cbranch-no" title="branch not covered" >r.resolve(),void n())</span>}).then(function(e){_=JSON.parse(e),r.resolve(),n()})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.rejeect(e),n(e)}</span>)},u=function a(u){u?t.set(u,e[u]).then(function(e){a(i.shift())},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>):s()};return u(i.shift()),r};var O={};x.watch=function(e,t,n){var r=this;"undefined"==typeof n&amp;&amp;t.apply&amp;&amp;(n=t,t="set");var i=Math.random().toString(32).substr(2);return O[e]||(O[e]={}),O[e][i]=function(t){for(var i,s=arguments.length,u=Array(s&gt;1?s-1:0),o=1;s&gt;o;o++)u[o-1]=arguments[o];t===e&amp;&amp;(i=n).call.apply(i,[r].concat(u))},O[e][i].command=t,this.on(t,O[e][i]),i},x.unwatch=function(e,t,n){"undefined"==typeof n&amp;&amp;t&amp;&amp;(n=t,t="set"),this.removeListener(t,O[e][n])},x.unwatchForKey=function(e){var t=O[e];for(var n in t){var r=t[n];this.removeListener(r.command,r)}},u["default"].extend(x,f["default"]),u["default"].extend(x,v["default"]),u["default"].extend(x,g["default"]),u["default"].extend(x,p["default"]),u["default"].extend(x,w["default"]),u["default"].extend(x,c["default"]);var S=function(e,t){<span class="missing-if-branch" title="else path not taken" >E</span>if(e||!t)return void(x._keys={});<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >x._keys=JSON.parse(keys)}</span>catch(e){<span class="cstat-no" title="statement not covered" >x._keys={}}</span>}</span>;<span class="missing-if-branch" title="if path not taken" >I</span>if(x.store.async)<span class="cstat-no" title="statement not covered" >x.store.get("min-min_keys",S);e</span>lse try{var E=x.store.get("min-min_keys");S(null,E)}catch(A){<span class="cstat-no" title="statement not covered" >S(A)}</span>},function(e,t,n){"use strict";function r(e){return e&amp;&amp;e.__esModule?e:<span class="branch-1 cbranch-no" title="branch not covered" >{"default":e}}</span>function i(e,t){<span class="missing-if-branch" title="if path not taken" >I</span>if(!(e instanceof t))<span class="cstat-no" title="statement not covered" >throw new TypeError("Cannot call a class as a function")}</span>var s=function(){function e(e,t){for(var n=0;n&lt;t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&amp;&amp;(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&amp;&amp;e(t.prototype,n),r&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >e(t,r),</span>t}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=r(u),a=n(2),c=o["default"].noop,l={};t["default"]=l;var f=function(){function e(t){var n=this;i(this,e),this.queue=[],this.last=null,this.state=0,this.min=t;for(var r=Object.getOwnPropertyNames(t),s=0;s&lt;r.length;s++){var u=r[s];"function"==typeof t[u]&amp;&amp;!function(e){n[e]=function(){for(var t=arguments.length,r=Array(t),i=0;t&gt;i;i++)r[i]=arguments[i];return n.queue.push({method:e,args:r}),n}}(u)}}return s(e,[{key:"exec",value:function(){var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?<span class="branch-0 cbranch-no" title="branch not covered" >c:</span>arguments[0],n=new a.Promise,r=[],i=function s(i){i?e.min[i.method].apply(e.min,i.args).then(function(){for(var t=arguments.length,n=Array(t),i=0;t&gt;i;i++)n[i]=arguments[i];n.length&gt;1?<span class="branch-0 cbranch-no" title="branch not covered" >r.push(n):</span>r.push(n[0]),s(e.queue.shift())})["catch"](function(e){n.reject(e),t(e,r)}):(n.resolve(r),t(null,r))};return i(this.queue.shift()),n}}]),e}();l.multi=function(){return new f(this)};var h=function(){<span class="fstat-no" title="function not covered" >function e(t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,s=arguments.length&lt;=2||void 0===arguments[2]?c:arguments[2];<span class="cstat-no" title="statement not covered" >i</span>(this,e),this.min=n,this.callback=s,this.result=[],this.keys={},this.promise=new a.Promise(c),this.sortFn=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return o["default"].isNumber(e)&amp;&amp;o["default"].isNumber(t)?e-t:JSON.stringify(e)&gt;JSON.stringify(t)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar u=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.min.exists(t).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e?r.min.get(t):new Error("no such key")}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=new a.Promise(c);<span class="cstat-no" title="statement not covered" >s</span>witch(!0){case Array.isArray(e):<span class="cstat-no" title="statement not covered" >t.resolve(e);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase e.ms&amp;&amp;Array.isArray(e.ms):<span class="cstat-no" title="statement not covered" >t.resolve(e.ms);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >return new Error("content type wrong")}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.result=e.sort(r.sortFn),r.result.forEach(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.keys[e]=e}</span>),r.promise.resolve(r.result),r.callback(null,r.result)}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.promise.reject(e),r.callback(e)}</span>)}</span>,l=<span class="fstat-no" title="function not covered" >function f(e){<span class="cstat-no" title="statement not covered" ></span>var t=e.shift();<span class="cstat-no" title="statement not covered" >t</span>?(r[t]=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var e=arguments.length,n=Array(e),i=0;e&gt;i;i++)<span class="cstat-no" title="statement not covered" >n[i]=arguments[i];<span class="cstat-no" title="statement not covered" >r</span></span>eturn r.promise[t].apply(r.promise,n)}</span>,f(e)):u()}</span>;<span class="cstat-no" title="statement not covered" >l</span>(["then","done"])}</span>return s(e,[{key:"by",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?c:arguments[1],r={},i=[],s=null;<span class="cstat-no" title="statement not covered" >i</span>f(e.indexOf("-&gt;")&gt;0){<span class="cstat-no" title="statement not covered" >var u=e.indexOf("-&gt;");<span class="cstat-no" title="statement not covered" >s</span>=e.substr(u+2),e=e.substr(0,e.length-u)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this.min.keys(e).then(<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>for(var s=new RegExp(e.replace("?","(.)").replace("*","(.*)")),u=0;u&lt;n.length;u++){<span class="cstat-no" title="statement not covered" >var o=s.exec(n[u])[1];<span class="cstat-no" title="statement not covered" >t</span>.result.indexOf(o)&gt;=0&amp;&amp;(r[n[u]]=o)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn i=Object.keys(r),t.min.mget(i.slice())}</span>).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>for(var s={},u=0;u&lt;e.length;u++)<span class="cstat-no" title="statement not covered" >s[JSON.stringify(e[u])]=i[u];<span class="cstat-no" title="statement not covered" >e</span></span>.sort(t.sortFn);<span class="cstat-no" title="statement not covered" >v</span>ar o=e.map(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return s[JSON.stringify(e)]}</span>).map(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return r[e]}</span>);<span class="cstat-no" title="statement not covered" >t</span>.result=o,t.promise.resolve(o),n(null,o)}</span>)["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e),t.callback(e)}</span>),this}</span>},{key:"asc",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?c:arguments[0];</span>
<span class="cstat-no" title="statement not covered" >this.sortFn=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return o["default"].isNumber(e)&amp;&amp;o["default"].isNumber(t)?e-t:JSON.stringify(e)&gt;JSON.stringify(t)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar n=<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>e.result=n.sort(e.sortFn),e.promise.resolve(e.result),t(null,e.result)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?n(this.result):this.promise.once("resolve",n),this}</span>},{key:"desc",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?c:arguments[0];<span class="cstat-no" title="statement not covered" >t</span>his.sortFn=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return o["default"].isNumber(e)&amp;&amp;o["default"].isNumber(t)?t-e:JSON.stringify(e)&lt;JSON.stringify(t)}</span>;<span class="cstat-no" title="statement not covered" >v</span>ar n=<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>e.result=n.sort(e.sortFn),e.promise.resolve(e.result),t(null,e.result)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?n(this.result):this.promise.once("resolve",n),this}</span>},{key:"get",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?c:arguments[1],r=<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>var i=[],s=<span class="fstat-no" title="function not covered" >function u(r){<span class="cstat-no" title="statement not covered" ></span>var s=r.shift();<span class="cstat-no" title="statement not covered" >i</span>f(o["default"].isUndefined(s))<span class="cstat-no" title="statement not covered" >t.result=i,t.promise.resolve(i),n(null,i);e</span>lse <span class="cstat-no" title="statement not covered" >if(Array.isArray(s)){<span class="cstat-no" title="statement not covered" >var a=t.keys[s[0]];<span class="cstat-no" title="statement not covered" >t</span>.min.get(e.replace("*",a)).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.push(e),i.push(s),u(r)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e)}</span>)}</span>else<span class="cstat-no" title="statement not covered" >(s.substr||o["default"].isNumber(s))&amp;&amp;!<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=t.keys[s];<span class="cstat-no" title="statement not covered" >t</span>.min.get(e.replace("*",a)).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.push([e]),e.substr||o["default"].isNumber(e)?t.keys[e]=a:t.keys[JSON.stringify(e)]=a,u(r)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e)}</span>)}</span>()}</span></span></span>;<span class="cstat-no" title="statement not covered" >s</span>(r.slice())}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?r(this.result):this.promise.once("resolve",r),this}</span>},{key:"hget",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?c:arguments[2],i=<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>var s=[],u=<span class="fstat-no" title="function not covered" >function a(i){<span class="cstat-no" title="statement not covered" ></span>var u=i.shift();<span class="cstat-no" title="statement not covered" >i</span>f(o["default"].isUndefined(u))<span class="cstat-no" title="statement not covered" >n.result=s,n.promise.resolve(s),r(null,s);e</span>lse <span class="cstat-no" title="statement not covered" >if(Array.isArray(u)){<span class="cstat-no" title="statement not covered" >var c=n.keys[u[0]];<span class="cstat-no" title="statement not covered" >n</span>.min.hget(e.replace("*",c),t).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.push(e),s.push(u),a(i)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.promise.reject(e),r(e)}</span>)}</span>else<span class="cstat-no" title="statement not covered" >(u.substr||o["default"].isNumber(u))&amp;&amp;!<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var t=n.keys[u];<span class="cstat-no" title="statement not covered" >n</span>.min.hget(e.replace("*",t)).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.push([e]),e.substr||o["default"].isNumber(e)?n.keys[e]=t:n.keys[JSON.stringify(e)]=t,a(i)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.promise.reject(e),r(e)}</span>)}</span>()}</span></span></span>;<span class="cstat-no" title="statement not covered" >u</span>(i.slice())}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?i(this.result):this.promise.once("resolve",i),this}</span>},{key:"limit",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=this,r=arguments.length&lt;=2||void 0===arguments[2]?c:arguments[2],i=<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>n.result=i.splice(e,t),n.promise.resolve(n.result),r(null,n.result)}</span>;<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?i(this.result):this.promise.once("resolve",i),this}</span>},{key:"flatten",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?c:arguments[0];<span class="cstat-no" title="statement not covered" >i</span>f(this.promise.ended){<span class="cstat-no" title="statement not covered" >for(var n=[],r=0;r&lt;this.result.length;r++)<span class="cstat-no" title="statement not covered" >for(var i=0;i&lt;this.result[r].length;i++)<span class="cstat-no" title="statement not covered" >n.push(this.result[r][i]);<span class="cstat-no" title="statement not covered" >t</span></span></span>his.result=n,this.promise.resolve(n),t(null,n)}</span>else <span class="cstat-no" title="statement not covered" >this.promise.once("resolve",<span class="fstat-no" title="function not covered" >function(n){<span class="cstat-no" title="statement not covered" ></span>for(var r=[],i=0;i&lt;n.length;i++)<span class="cstat-no" title="statement not covered" >for(var s=0;s&lt;n[i].length;s++)<span class="cstat-no" title="statement not covered" >r.push(n[i][s]);<span class="cstat-no" title="statement not covered" >e</span></span></span>.result=r,e.promise.resolve(r),t(null,r)}</span>);<span class="cstat-no" title="statement not covered" >r</span></span>eturn this}</span>},{key:"store",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?c:arguments[1];<span class="cstat-no" title="statement not covered" >r</span>eturn this.promise.ended?this.min.set(e,this.result).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.resolve(t.result),n(null,t.result)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e)}</span>):this.promise.once("resolve",<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>t.min.set(e,r).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.resolve(r),n(null,r)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t.promise.reject(e),n(e)}</span>)}</span>),this}</span>}]),e}();l.sort=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?c:arguments[1];<span class="cstat-no" title="statement not covered" >r</span>eturn new h(e,void 0,t)}</span>;var v=function(){<span class="fstat-no" title="function not covered" >function e(t,n,r,s){<span class="cstat-no" title="statement not covered" ></span>i(this,e),n=n||"*",this.cursor=t||0,this.pattern=new RegExp(n.replace("*","(.*)")),this.limit=r&gt;-1?r:10,this.end=this.cursor,this.parent=s}</span>return s(e,[{key:"scan",value:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=this,t=arguments.length&lt;=0||void 0===arguments[0]?c:arguments[0],n=[];<span class="cstat-no" title="statement not covered" >r</span>eturn this.parent.get("min_keys").then(<span class="fstat-no" title="function not covered" >function(r){<span class="cstat-no" title="statement not covered" ></span>r=JSON.parse(r);<span class="cstat-no" title="statement not covered" >v</span>ar i=Object.keys(r),s=<span class="fstat-no" title="function not covered" >function u(r){<span class="cstat-no" title="statement not covered" ></span>var s=i[r];<span class="cstat-no" title="statement not covered" >i</span>f(s&amp;&amp;e.pattern.test(s)&amp;&amp;"min_keys"!==s){<span class="cstat-no" title="statement not covered" >if(n.push(s),++e.end-e.cursor&gt;=e.limit)<span class="cstat-no" title="statement not covered" >return t(null,n,e.end)}</span></span>else <span class="cstat-no" title="statement not covered" >if(!s)<span class="cstat-no" title="statement not covered" >return e.end=0,t(null,n,e.end);<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn u(++r)}</span>;<span class="cstat-no" title="statement not covered" >s</span>(e.cursor)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>t(e)}</span>),this}</span>},{key:"match",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?c:arguments[1];<span class="cstat-no" title="statement not covered" >r</span>eturn this.pattern=new RegExp(e.replace("*","(.*)")),this.end=this.cursor,this.scan(t)}</span>},{key:"count",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?c:arguments[1];<span class="cstat-no" title="statement not covered" >r</span>eturn this.limit=e,this.end=this.cursor,this.scan(t)}</span>}]),e}();l.scan=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=arguments.length&lt;=1||void 0===arguments[1]?c:arguments[1],n=new v(e,null,-1,void 0);<span class="cstat-no" title="statement not covered" >r</span>eturn n.scan(t),n}</span>},function(e,t,n){"use strict";function r(e){return e&amp;&amp;e.__esModule?e:<span class="branch-1 cbranch-no" title="branch not covered" >{"default":e}}</span>Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=r(i),u=n(2),o=s["default"].noop,a={};t["default"]=a;var c=null;a.set=function(e,t,n){var r=this,i=new u.Promise;i.then(function(n){r.emit("set",e,t),c&amp;&amp;clearTimeout(c),c=setTimeout(r.save.bind(r),1e3)});var o=this.store;n=n||s["default"].noop;var a="min-"+e;<span class="missing-if-branch" title="if path not taken" >I</span>if(o.async){<span class="cstat-no" title="statement not covered" >var l=<span class="fstat-no" title="function not covered" >function(s){<span class="cstat-no" title="statement not covered" ></span>var u=JSON.stringify(t);<span class="cstat-no" title="statement not covered" >o</span>.set(a,u,<span class="fstat-no" title="function not covered" >function(s){<span class="cstat-no" title="statement not covered" ></span>return s?(i.reject(s),n(s)):(r._keys[e]=0,i.resolve(e),void n(null,e,t))}</span>)}</span>;<span class="cstat-no" title="statement not covered" >o</span>.ready?l():o.on("ready",l)}</span>else{var f=JSON.stringify(t);o.set(a,f),this._keys[e]=0,i.resolve(e),n(null,e,t)}return i},a.setnx=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new u.Promise;return this.exists(e,function(s,u){return s&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >r(s),i.reject(s))</span>,u?i.reject(new Error("The key is exists.")):void n.set(e,t,r).then(function(e){r(null,e),i.resolve(e)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r(e),i.reject(e)}</span>)}),i},a.setex=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new u.Promise,a=function(t){r.del(e,o)};return this.set(e,n,function(e,n){setTimeout(a,1e3*t),i(e,n)}).then(function(e){setTimeout(a,1e3*t),s.resolve(e),i(null,e)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),i(e)}</span>),s},a.psetex=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>a=new u.Promise,c=function(t){r.del(e,s["default"].noop)};return this.set(e,n,function(e,n){setTimeout(c,t),i(e,n)}).then(function(e){setTimeout(c,t),a.resolve(e),i(null,e)})["catch"](a.reject.bind(a)),a},a.mset=function(e){function t(){l.length&gt;0?(<span class="branch-0 cbranch-no" title="branch not covered" >r(l),i.reject(l))</span>:(r(null,c),i.resolve(c))}var n=this,r=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>i=new u.Promise,s=Object.keys(e),a=0,c=[],l=[],f=function h(r,i){delete s[i],n.set(r,e[r]).then(function(e){c.push(e),a++,s[a]?h(s[a],a):t()},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return l.push(e),a++,s[a]?h(s[a],a):t()}</span>)};return f(s[a],a),i},a.msetnx=function(e){function t(){return l.length?(r(l),i.reject(l)):(r(null,c),void i.resolve(c))}var n=this,r=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>i=new u.Promise,s=Object.keys(e),a=0,c=[],l=[],f=function h(r,i){delete s[i],n.setnx(r,e[r]).then(function(e){c.push(e),a++,s[a]?h(s[a],a):t()},function(e){l.push(e),t()})};return f(s[a],a),i},a.append=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new u.Promise;return this.exists(e).then(function(t){if(t)return n.get(e);var r=new u.Promise;return r.resolve(""),r}).then(function(r){return n.set(e,r+t)}).then(function(t){return n.strlen(e)}).then(function(e){i.resolve(e),r(null,e)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i},a.get=function(e){var t=this,n=arguments.length&lt;=1||void 0===arguments[1]?o:arguments[1],r=new u.Promise;r.then(function(n){return t.emit("get",e,n)});var i=this.store,s="min-"+e;<span class="missing-if-branch" title="if path not taken" >I</span>if(i.async){<span class="cstat-no" title="statement not covered" >var a=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.get(s,<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>if(e){<span class="cstat-no" title="statement not covered" >var i=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>eturn r.reject(i),n(i)}<span class="cstat-no" title="statement not covered" ></span>i</span>f(t)<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >var s=JSON.parse(t);<span class="cstat-no" title="statement not covered" >r</span>.resolve(s),n(null,s)}</span>catch(e){<span class="cstat-no" title="statement not covered" >r.reject(e),n(e)}</span>e</span>lse{<span class="cstat-no" title="statement not covered" >var u=new Error("no such key");<span class="cstat-no" title="statement not covered" >r</span>.reject(u),n(u)}</span>}</span>)}</span>;<span class="cstat-no" title="statement not covered" >i</span>.ready?a():i.on("ready",a)}</span>else try{var c=this.store.get(s);if(c)try{var l=JSON.parse(c);r.resolve(l),n(null,l)}catch(f){<span class="cstat-no" title="statement not covered" >r.reject(f),n(f)}</span>else{var f=new Error("no such key");r.reject(f),n(f)}}catch(f){<span class="cstat-no" title="statement not covered" >r.reject(f),n(f)}</span>return r},a.getrange=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r=this,i=arguments.length&lt;=3||void 0===arguments[3]?o:arguments[3],s=new u.Promise;<span class="cstat-no" title="statement not covered" >s</span>.then(<span class="fstat-no" title="function not covered" >function(i){<span class="cstat-no" title="statement not covered" ></span>return r.emit("getrange",e,t,n,i)}</span>);<span class="cstat-no" title="statement not covered" >v</span>ar a=n-t+1;<span class="cstat-no" title="statement not covered" >r</span>eturn this.get(e).then(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var n=e.substr(t,a);<span class="cstat-no" title="statement not covered" >s</span>.resolve(n),i(null,n)}</span>,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),i(e)}</span>),s}</span>,a.mget=function(e){for(var t=arguments.length&lt;=1||void 0===arguments[1]?o:arguments[1],n=new u.Promise,r=this.multi(),i=0;i&lt;e.length;i++)r.get(e[i]);return r.exec(function(e,r){return e?(t(e),n.reject(e)):(t(e),void n.resolve(r))}),n},a.getset=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new u.Promise;i.then(function(r){return n.emit("getset",e,t,r)});var s=null;return this.get(e).then(function(r){return s=r,n.set(e,t)}).then(function(e){i.resolve(s),r(null,s)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i},a.strlen=function(e){var t=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>n=new u.Promise;return this.get(e).then(function(e){<span class="missing-if-branch" title="else path not taken" >E</span>if("string"==typeof e){var r=e.length;n.resolve(r),t(null,r)}else{<span class="cstat-no" title="statement not covered" >var i=new TypeError;<span class="cstat-no" title="statement not covered" >n</span>.reject(i),t(i)}</span>})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>n.reject(e),t(e)}</span>),n},a.incr=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new u.Promise;return r.then(function(n){return t.emit("incr",e,n)}),this.exists(e).then(function(n){if(n)return t.get(e);var r=new u.Promise;return r.resolve(0),r}).then(function(i){return isNaN(parseInt(i))?(<span class="branch-0 cbranch-no" title="branch not covered" >r.reject("value wrong"),n("value wrong"))</span>:(i=parseInt(i),t.set(e,++i))}).then(function(e){return t.get(e)}).then(function(t){r.resolve(t),n(null,t,e)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r},a.incrby=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new u.Promise;return i.then(function(r){return n.emit("incrby",e,t,r)}),this.exists(e).then(function(t){if(t)return n.get(e);var r=new u.Promise;return r.resolve(0),r}).then(function(s){return isNaN(parseFloat(s))?(<span class="branch-0 cbranch-no" title="branch not covered" >i.reject("value wrong"),r("value wrong"))</span>:(s=parseFloat(s),n.set(e,s+t))}).then(function(e,t){i.resolve(t),r(null,t)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i},a.incrbyfloat=a.incrby,a.decr=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new u.Promise;return r.then(function(n){return t.emit("decr",e,n)}),this.exists(e).then(function(n){if(n)return t.get(e);var r=new u.Promise;return r.resolve(0),r}).then(function(i){return isNaN(parseInt(i))?(<span class="branch-0 cbranch-no" title="branch not covered" >r.reject("value wrong"),n("value wrong"))</span>:(i=parseInt(i),t.set(e,--i))}).then(function(e){return t.get(e)}).then(function(t){r.resolve(t),n(null,t,e)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r.reject(e),n(e)}</span>),r},a.decrby=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>o:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new u.Promise;return i.then(function(r){return n.emit("decrby",e,t,r)}),this.exists(e).then(function(t){if(t)return n.get(e);var r=new u.Promise;return r.resolve(0),r}).then(function(s){return isNaN(parseInt(s))?(<span class="branch-0 cbranch-no" title="branch not covered" >i.reject("value wrong"),r("value wrong"))</span>:(s=parseInt(s),n.set(e,s-t))}).then(function(e,t){i.resolve(t),r(null,t)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>i.reject(e),r(e)}</span>),i}},function(e,t,n){"use strict";function r(e){return e&amp;&amp;e.__esModule?e:<span class="branch-1 cbranch-no" title="branch not covered" >{"default":e}}</span>function i(e){<span class="missing-if-branch" title="else path not taken" >E</span>if(Array.isArray(e)){for(var t=0,n=Array(e.length);t&lt;e.length;t++)n[t]=e[t];return n}<span class="cstat-no" title="statement not covered" >return Array.from(e)}</span>var s=function(){<span class="fstat-no" title="function not covered" >function e(e,t){<span class="cstat-no" title="statement not covered" ></span>var n=[],r=!0,i=!1,s=void 0;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >for(var u,o=e[Symbol.iterator]();!(r=(u=o.next()).done)&amp;&amp;(n.push(u.value),!t||n.length!==t);r=!0);}</span>catch(a){<span class="cstat-no" title="statement not covered" >i=!0,s=a}</span>finally{<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >!r&amp;&amp;o["return"]&amp;&amp;o["return"]()}</span>finally{<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw s}</span></span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn n}</span>return function(t,n){<span class="missing-if-branch" title="else path not taken" >E</span>if(Array.isArray(t))return t;<span class="cstat-no" title="statement not covered" >if(Symbol.iterator in Object(t))<span class="cstat-no" title="statement not covered" >return e(t,n);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new TypeError("Invalid attempt to destructure non-iterable instance")}</span>}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),o=r(u),a=n(2),c=o["default"].noop,l={};t["default"]=l,l.sadd=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)r[i-1]=arguments[i];var s=new a.Promise(c);s.then(function(n){return t.emit("sadd",e,n)});var u=0,l=c;return r[r.length-1]instanceof Function&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >l=r.pop())</span>,this.exists(e).then(function(n){if(n)return t.get(e);var i=o["default"].arrayUnique(r);return t.set(e,i)}).then(function(){if(Array.isArray(arguments[0])){var n=arguments[0],i=!0,o=!1,a=void 0;try{for(var c,f=r[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var h=c.value;n.indexOf(h)&gt;=0||(n.push(h),u++)}}catch(v){<span class="cstat-no" title="statement not covered" >o=!0,a=v}</span>finally{try{!i&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >f["return"]&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >f["return"]()}</span>finally{<span class="missing-if-branch" title="if path not taken" >I</span>if(o)<span class="cstat-no" title="statement not covered" >throw a}</span>}return t.set(e,n)}"string"==typeof arguments[0]&amp;&amp;(u+=r.length,t._keys[e]=3,s.resolve(u),l(null,u))}).then(function(n){t._keys[e]=3,s.resolve(u),l(null,u)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),l(e)}</span>),s},l.srem=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)r[i-1]=arguments[i];var s=new a.Promise(c),u=c;s.then(function(n){return t.emit("srem",e,r,n)});var o=0;return r[r.length-1]instanceof Function&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >u=r.pop())</span>,this.exists(e).then(function(n){if(n)return t.get(e);throw new Error("no such key")}).then(function(n){var i=!0,s=!1,u=void 0;try{for(var a,c=r[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var l=a.value,f=n.indexOf(l);f&gt;=0&amp;&amp;(n.splice(f,1),o++)}}catch(h){<span class="cstat-no" title="statement not covered" >s=!0,u=h}</span>finally{try{!i&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >c["return"]&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >c["return"]()}</span>finally{<span class="missing-if-branch" title="if path not taken" >I</span>if(s)<span class="cstat-no" title="statement not covered" >throw u}</span>}return t.set(e,n)}).then(function(n){t._keys[e]=3,s.resolve(o),u(null,o)})["catch"](function(e){s.reject(e),u(e)}),s},l.smembers=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new a.Promise(c);return this.exists(e).then(function(n){if(n)return t.get(e);throw new Error("no such key")}).then(function(e){r.resolve(e),n(null,e)})["catch"](function(e){r.reject(e),n(e)}),r},l.sismember=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new a.Promise(c);return this.exists(e).then(function(t){if(t)return n.get(e);throw new Error("no such key")}).then(function(e){var n=e.indexOf(t)&gt;=0?!0:!1;i.resolve(n),r(null,n)})["catch"](function(e){i.reject(e),r(e)}),i},l.scard=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new a.Promise(c);return this.exists(e).then(function(n){if(n)return t.get(e);throw new Error("no such key")}).then(function(e){var t=e.length;r.resolve(t),n(null,t)})["catch"](function(e){r.reject(e),n(e)}),r},l.smove=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new a.Promise(c);return s.then(function(i){return r.emit("smove",e,t,n,i)}),this.exists(e).then(function(t){if(t)return r.sismember(e,n);throw new Error("no such key")}).then(function(t){if(t)return r.srem(e,n);throw new Error("no such member")}).then(function(){return r.sadd(t,n)}).then(function(e){r._keys[t]=3,s.resolve(1),i(null,1)})["catch"](function(e){s.reject(e),i(e)}),s},l.srandmember=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new a.Promise(c);return this.exists(e).then(function(i){return i?t.get(e):(r.resolve(null),void n(null,null))}).then(function(e){var t=Math.floor(Math.random()*e.length)||<span class="branch-1 cbranch-no" title="branch not covered" >0,</span>i=e[t];r.resolve(i),n(null,i)})["catch"](function(e){r.reject(e),n(e)}),r},l.spop=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>c:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new a.Promise(c);r.then(function(n){return t.emit("spop",e,n)});var i=null;return this.exists(e).then(function(i){return i?t.srandmember(e):(r.resolve(null),void n(null,null))}).then(function(n){return i=n,t.srem(e,i)}).then(function(e){r.resolve(i),n(null,i)})["catch"](function(e){r.reject(e),n(e)}),r},l.sunion=function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t&gt;r;r++)n[r]=arguments[r];var i=new a.Promise(c),s=c;n[n.length-1]instanceof Function&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >s=n.pop())</span>;var u=[],l=function f(t){var r=n[t];r?e.exists(r).then(function(n){return n?e.get(r):<span class="branch-1 cbranch-no" title="branch not covered" >void f(++t)}</span>).then(function(e){Array.isArray(e)&amp;&amp;(u=u.concat(e)),f(++t)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return i.reject(e),s(e)}</span>):(u=o["default"].arrayUnique(u),i.resolve(u),s(null,u))};return l(0),i},l.sunionstore=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),u=1;n&gt;u;u++)r[u-1]=arguments[u];var o=new a.Promise(c),l=c;o.then(function(n){var i=s(n,2),u=i[0],o=i[1];return t.emit("sunionstore",e,r,u,o)}),r[r.length-1]instanceof Function&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >l=r.pop())</span>;var f=null;return this.sunion.apply(this,r).then(function(n){return f=n,t.del(e)}).then(function(){return t.sadd.apply(t,[e].concat(i(f)))}).then(function(e){o.resolve([e,f]),l(null,e,f)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>o.reject(e),l(e)}</span>),o},l.sinter=function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t&gt;r;r++)n[r]=arguments[r];var i=new a.Promise(c),s=c;n[n.length-1]instanceof Function&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >s=n.pop())</span>;var u=[],l=function f(t){var r=n[t];if(r)e.exists(r).then(function(n){return n?e.get(r):<span class="branch-1 cbranch-no" title="branch not covered" >void f(++t)}</span>).then(function(e){Array.isArray(e)&amp;&amp;u.push(e),f(++t)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return i.reject(e),s(e)}</span>);else{var a=o["default"].arrayInter.apply(o["default"],u);i.resolve(a),s(null,a)}};return l(0),i},l.sinterstore=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),u=1;n&gt;u;u++)r[u-1]=arguments[u];var o=new a.Promise(c),l=c;r[r.length-1]instanceof Function&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >l=r.pop())</span>,o.then(function(n){var i=s(n,2),u=i[0],o=i[1];return t.emit("sinterstore",e,r,u,o)});var f=null;return this.sinter.apply(this,r).then(function(n){return f=n,t.del(e)}).then(function(){return t.sadd.apply(t,[e].concat(i(f)))}).then(function(e){o.resolve([f.length,f]),l(null,f.length,f)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>o.reject(e),l(e)}</span>),o},l.sdiff=function(){for(var e=this,t=arguments.length,n=Array(t),r=0;t&gt;r;r++)n[r]=arguments[r];var i=new a.Promise(c),s=c;n[n.length-1]instanceof Function&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >s=n.pop())</span>;var u=[],l=function f(t){var r=n[t];if(r)e.exists(r).then(function(n){return n?e.get(r):<span class="branch-1 cbranch-no" title="branch not covered" >void f(++t)}</span>).then(function(e){Array.isArray(e)&amp;&amp;u.push(e),f(++t)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return i.reject(e),s(e)}</span>);else{var a=o["default"].arrayDiff.apply(o["default"],u);i.resolve(a),s(null,a)}};return l(0),i},l.sdiffstore=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),u=1;n&gt;u;u++)r[u-1]=arguments[u];var o=new a.Promise(c),l=c;r[r.length-1]instanceof Function&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >l=r.pop())</span>,o.then(function(n){var i=s(n,2),u=i[0],o=i[1];return t.emit("sdiffstore",e,r,u,o)});var f=null;return this.sdiff.apply(this,r).then(function(n){return f=n,t.del(e)}).then(function(n){return t.sadd.apply(t,[e].concat(i(f)))}).then(function(e){o.resolve([e,f]),l(null,e,f)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>o.reject(e),l(e)}</span>),o}},function(e,t){"use strict";function n(e,t){<span class="missing-if-branch" title="if path not taken" >I</span>if(!(e instanceof t))<span class="cstat-no" title="statement not covered" >throw new TypeError("Cannot call a class as a function")}</span>var r=function(){function e(e,t){for(var n=0;n&lt;t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&amp;&amp;(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&amp;&amp;e(t.prototype,n),r&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >e(t,r),</span>t}}();Object.defineProperty(t,"__esModule",{value:!0});t.memStore=function(){<span class="fstat-no" title="function not covered" >function e(){<span class="cstat-no" title="statement not covered" ></span>n(this,e)}</span>return r(e,[{key:"get",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return sessionStorage?sessionStorage.getItem(e):!1}</span>},{key:"set",value:<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>return sessionStorage?sessionStorage.setItem(e,t):!1}</span>},{key:"remove",value:<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return sessionStorage?sessionStorage.removeItem(e):!1}</span>}]),e}(),t.localStore=function(){function e(){n(this,e)}return r(e,[{key:"get",value:function(e){return localStorage?localStorage.getItem(e):<span class="branch-1 cbranch-no" title="branch not covered" >!1}</span>},{key:"set",value:function(e,t){return localStorage?localStorage.setItem(e,t):<span class="branch-1 cbranch-no" title="branch not covered" >!1}</span>},{key:"remove",value:function(e){return localStorage?localStorage.removeItem(e):<span class="branch-1 cbranch-no" title="branch not covered" >!1}</span>}]),e}()},function(e,t,n){"use strict";function r(e){return e&amp;&amp;e.__esModule?e:<span class="branch-1 cbranch-no" title="branch not covered" >{"default":e}}</span>function i(e){return e&amp;&amp;"undefined"!=typeof Symbol&amp;&amp;e.constructor===Symbol?<span class="branch-0 cbranch-no" title="branch not covered" >"symbol":</span>typeof e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=r(s),o=n(2),a=u["default"].noop,c={};t["default"]=c,c.zadd=function(e,t,n){var r=this,s=arguments.length&lt;=3||void 0===arguments[3]?a:arguments[3],u=new o.Promise(a);return u.then(function(i){return r.emit("zadd",e,t,n,i)}),this.exists(e).then(function(i){if(i)return r.get(e);var s={};return s[t]=[0],r.set(e,{ms:[n],hsm:{0:t},shm:s})}).then(function(o){if("string"==typeof o)r._keys[e]=4,u.resolve(1,1),s(null,1,1);else <span class="missing-if-branch" title="else path not taken" >E</span>if("object"===("undefined"==typeof o?<span class="branch-0 cbranch-no" title="branch not covered" >"undefined":</span>i(o))){var a=o;<span class="missing-if-branch" title="if path not taken" >I</span>if(a.ms.indexOf(n)&gt;=0){<span class="cstat-no" title="statement not covered" >var c=a.ms.length;<span class="cstat-no" title="statement not covered" >r</span>eturn u.resolve(0,c),s(null,0,c)}</span>var l=a.ms.length;return a.ms.push(n),a.hsm[l]=t,Array.isArray(a.shm[t])?<span class="branch-0 cbranch-no" title="branch not covered" >a.shm[t].push(l):</span>a.shm[t]=[l],r.set(e,a)}}).then(function(){return r.get(e)}).then(function(t){r._keys[e]=4;var n=t.ms.length;u.resolve(1,n),s(null,1,n)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>u.reject(e),s(e)}</span>),u},c.zcard=function(e){var t=this,n=arguments.length&lt;=1||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[1]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[1],</span>r=new o.Promise(a);return this.exists(e).then(function(i){if(i)return t.get(e);var s=new Error("no such key");r.reject(s),n(s)}).then(function(e){var t=e.ms.filter(Boolean).length;r.resolve(t),n(null,t)})["catch"](function(e){r.reject(e),n(e)}),r},c.zcount=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new o.Promise(a);return s.then(function(i){return r.emit("zcount",e,t,n,value,i)}),this.exists(e).then(function(t){if(t)return r.get(e);var n=new Error("no such key");s.reject(n),i(n)}).then(function(e){var r=Object.keys(e.shm).filter(function(e){return e&gt;=t&amp;&amp;n&gt;=e}).map(function(t){return e.shm[t]}),u=r.map(function(e){return e.length}).reduce(function(e,t){return e+t});s.resolve(u),i(null,u)})["catch"](function(e){s.reject(e),i(e)}),s},c.zrem=function(e){for(var t=this,n=arguments.length,r=Array(n&gt;1?n-1:0),i=1;n&gt;i;i++)r[i-1]=arguments[i];var s=new o.Promise(a),u=a;r[r.length-1]instanceof Function&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >u=r.pop())</span>,s.then(function(n){return t.emit("zrem",e,r,n)});var c=0;return this.exists(e).then(function(n){if(n)return t.get(e);var r=new Error("no such key");s.reject(r),u(r)}).then(function(e){var t=new o.Promise(a),n=!0,i=!1,s=void 0;try{for(var u,l=r[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var f=u.value,h=e.ms.indexOf(f);<span class="missing-if-branch" title="else path not taken" >E</span>if(h&gt;=0){delete e.ms[h];var v=e.hsm[h];delete e.hsm[h];var m=e.shm[String(v)].indexOf(h);m&gt;=0&amp;&amp;e.shm[String(v)].splice(m,1),c++}}}catch(g){i=!0,s=g}finally{try{!n&amp;&amp;l["return"]&amp;&amp;<span class="branch-2 cbranch-no" title="branch not covered" >l["return"]()}</span>finally{if(i)throw s}}return t.resolve(e),t}).then(function(n){return t.set(e,n)}).then(function(e){s.resolve(c),u(null,c)})["catch"](function(e){s.reject(e),u(null,e)}),s},c.zscore=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new o.Promise(a);return this.exists(e).then(function(t){if(t)return n.get(e);var s=new Error("no such key");i.reject(s),r(s)}).then(function(e){var n=e.ms.indexOf(t);if(n&gt;=0){var s=e.hsm[n];i.resolve(s),r(null,s)}else{var u=new Error("This member does not be in the set");i.reject(u),r(u)}}),i},c.zrange=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new o.Promise(a);return this.exists(e).then(function(t){if(t)return r.get(e);var n=new Error("no such key");s.reject(n),i(n)}).then(function(e){var r=Object.keys(e.shm).map(function(e){return parseFloat(e)}).sort().filter(function(e){return e&gt;=t&amp;&amp;n&gt;=e}).map(function(t){return e.shm[t]}),u=r.map(function(t){return t.map(function(t){return e.ms[t]})}).reduce(function(e,t){return e.concat(t)});s.resolve(u),i(null,u)})["catch"](function(e){s.reject(e),i(e)}),s.withScore=function(){var t=arguments.length&lt;=0||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[0]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[0],</span>n=new o.Promise(a);return s.then(function(i){var s=r.multi();i.forEach(function(t){return s.zscore(e,t)}),s.exec(function(e,r){<span class="missing-if-branch" title="if path not taken" >I</span>if(e)<span class="cstat-no" title="statement not covered" >return t(e),n.reject(e);v</span>ar s=r.map(function(e,t){return{member:i[t],score:e}});n.resolve(s),t(null,s)})}),n},s},c.zrevrange=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new o.Promise(a);return this.exists(e).then(function(t){if(t)return r.get(e);var n=new Error("no such key");s.reject(n),i(n)}).then(function(e){var r=Object.keys(e.shm).map(function(e){return parseFloat(e)}).sort(function(e,t){return t&gt;e}).filter(function(e){return e&gt;=t&amp;&amp;n&gt;=e}).map(function(t){return e.shm[t]}),u=r.map(function(t){return t.map(function(t){return e.ms[t]})}).reduce(function(e,t){return e.concat(t)});s.resolve(u),i(null,u)},<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),i(e)}</span>),s.withScore=function(){var t=arguments.length&lt;=0||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[0]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[0],</span>n=new o.Promise(a);return s.then(function(i){var s=r.multi();i.forEach(function(t){return s.zscore(e,t)}),s.exec(function(e,r){<span class="missing-if-branch" title="if path not taken" >I</span>if(e)<span class="cstat-no" title="statement not covered" >return t(e),n.reject(e);v</span>ar s=r.map(function(e,t){return{member:i[t],score:e}});n.resolve(s),t(null,s)})}),n},s},c.zincrby=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new o.Promise(a);s.then(function(i){return r.emit("zincrby",e,t,n,i)});var u=null;return this.exists(e).then(function(t){return t?r.zscore(e,n):void r.zadd(e,0,n,i).then(s.resolve.bind(s),s.reject.bind(s))}).then(function(t){return r.get(e)}).then(function(i){var s=i.ms.indexOf(n),o=i.hsm[s];u=o+t;var a=i.shm[o].indexOf(s);return i.shm[o].splice(a,1),i.hsm[s]=u,i.shm[u]?<span class="branch-0 cbranch-no" title="branch not covered" >i.shm[u].push(s):</span>i.shm[u]=[s],r.set(e,i)}).then(function(e){s.resolve(u),i(null,u)})["catch"](<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>s.reject(e),i(e)}</span>),s},c.zdecrby=function(e,t,n){var r=this,i=arguments.length&lt;=3||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[3]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[3],</span>s=new o.Promise(a);s.then(function(e){return r.emit("zdecrby",keys,t,n,e)});var u=null;return this.exists(e).then(function(t){if(t)return r.zscore(e,n);var u=new Error("no such key");s.reject(u),i(u)}).then(function(t){return r.get(e)}).then(function(i){var s=i.ms.indexOf(n),o=i.hsm[s];u=o-t;var a=i.shm[o].indexOf(s);return i.shm[o].splice(a,1),i.hsm[s]=u,i.shm[u]?<span class="branch-0 cbranch-no" title="branch not covered" >i.shm[u].push(s):</span>i.shm[u]=[s],r.set(e,i)}).then(function(e){s.resolve(u),i(null,u)})["catch"](function(e){s.reject(e),i(e)}),s},c.zrank=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new o.Promise(a);return this.exists(e).then(function(t){if(t)return n.get(e);throw new Error("no such key")}).then(function(e){var n=Object.keys(e.shm).map(function(e){return parseFloat(e)}).sort(),s=parseFloat(e.hsm[e.ms.indexOf(t)]),u=n.indexOf(s)+1;i.resolve(u),r(null,u)})["catch"](function(e){i.reject(e),r(e)}),i},c.zrevrank=function(e,t){var n=this,r=arguments.length&lt;=2||<span class="branch-1 cbranch-no" title="branch not covered" >void 0===arguments[2]?</span>a:<span class="branch-1 cbranch-no" title="branch not covered" >arguments[2],</span>i=new o.Promise(a);return this.exists(e).then(function(t){if(t)return n.get(e);throw new Error("no such key")}).then(function(e){var n=Object.keys(e.shm).map(function(e){return parseFloat(e)}).sort(),s=parseFloat(e.hsm[e.ms.indexOf(t)]),u=n.reverse().indexOf(s)+1;i.resolve(u),r(null,u)},function(e){i.reject(e),r(e)}),i}},function(e,t,n){"use strict";n(12)()||<span class="branch-1 cbranch-no" title="branch not covered" >Object.defineProperty(n(15),"Symbol",{value:n(28),configurable:!0,enumerable:!1,writable:!0})}</span>,function(e,t){"use strict";e.exports=function(){var e;<span class="missing-if-branch" title="if path not taken" >I</span>if("function"!=typeof Symbol)<span class="cstat-no" title="statement not covered" >return!1;e</span>=Symbol("test symbol");try{String(e)}catch(t){<span class="cstat-no" title="statement not covered" >return!1}</span>return"symbol"==typeof Symbol.iterator?!0:<span class="branch-1 cbranch-no" title="branch not covered" >"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}</span>},<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return e&amp;&amp;("symbol"==typeof e||"Symbol"===e["@@toStringTag"])||!1}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >var r,i=n(16),s=n(23),u=n(19),o=n(25);<span class="cstat-no" title="statement not covered" >r</span>=e.exports=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n,r,u,a,c;<span class="cstat-no" title="statement not covered" >r</span>eturn arguments.length&lt;2||"string"!=typeof e?(a=t,t=e,e=null):a=arguments[2],null==e?(n=u=!0,r=!1):(n=o.call(e,"c"),r=o.call(e,"e"),u=o.call(e,"w")),c={value:t,configurable:n,enumerable:r,writable:u},a?i(s(a),c):c}</span>,r.gs=<span class="fstat-no" title="function not covered" >function(e,t,n){<span class="cstat-no" title="statement not covered" ></span>var r,a,c,l;<span class="cstat-no" title="statement not covered" >r</span>eturn"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],null==t?t=void 0:u(t)?null==n?n=void 0:u(n)||(c=n,n=void 0):(c=t,t=n=void 0),null==e?(r=!0,a=!1):(r=o.call(e,"c"),a=o.call(e,"e")),l={get:t,set:n,configurable:r,enumerable:a},c?i(s(c),l):l}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=new Function("return this")()}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=n(17)()?Object.assign:n(18)}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e,t=Object.assign;<span class="cstat-no" title="statement not covered" >r</span>eturn"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >var r=n(20),i=n(24),s=Math.max;<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n,u,o,a=s(arguments.length,2);<span class="cstat-no" title="statement not covered" >f</span>or(e=Object(i(e)),o=function(r){try{e[r]=t[r]}catch(i){n||(n=i)}},u=1;a&gt;u;++u)<span class="cstat-no" title="statement not covered" >t=arguments[u],r(t).forEach(o);<span class="cstat-no" title="statement not covered" >i</span></span>f(void 0!==n)<span class="cstat-no" title="statement not covered" >throw n;<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return"function"==typeof e}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=n(21)()?Object.keys:n(22)}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >return Object.keys("primitive"),!0}</span>catch(e){<span class="cstat-no" title="statement not covered" >return!1}</span>}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >var n=Object.keys;<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return n(null==e?e:Object(e))}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >var n=Array.prototype.forEach,r=Object.create,i=<span class="fstat-no" title="function not covered" >function(e,t){<span class="cstat-no" title="statement not covered" ></span>var n;<span class="cstat-no" title="statement not covered" >f</span>or(n in e)<span class="cstat-no" title="statement not covered" >t[n]=e[n]}</span></span>;<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t=r(null);<span class="cstat-no" title="statement not covered" >r</span>eturn n.call(arguments,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>null!=e&amp;&amp;i(Object(e),t)}</span>),t}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(null==e)<span class="cstat-no" title="statement not covered" >throw new TypeError("Cannot use null or undefined");<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >e.exports=n(26)()?String.prototype.contains:n(27)}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >var n="razdwatrzy";<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&amp;&amp;n.contains("foo")===!1}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t){</span>"use strict";<span class="cstat-no" title="statement not covered" >var n=String.prototype.indexOf;<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return n.call(this,e,arguments[1])&gt;-1}</span>}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >var r,i,s,u=n(14),o=n(29),a=Object.create,c=Object.defineProperties,l=Object.defineProperty,f=Object.prototype,h=a(null);<span class="cstat-no" title="statement not covered" >"</span>function"==typeof Symbol&amp;&amp;(r=Symbol);<span class="cstat-no" title="statement not covered" >v</span>ar v=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=a(null);<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(t){<span class="cstat-no" title="statement not covered" ></span>for(var n,r,i=0;e[t+(i||"")];)<span class="cstat-no" title="statement not covered" >++i;<span class="cstat-no" title="statement not covered" >r</span></span>eturn t+=i||"",e[t]=!0,n="@@"+t,l(f,n,u.gs(null,<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>r||(r=!0,l(this,n,u(e)),r=!1)}</span>)),n}</span>}</span>();<span class="cstat-no" title="statement not covered" >s</span>=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(this instanceof s)<span class="cstat-no" title="statement not covered" >throw new TypeError("TypeError: Symbol is not a constructor");<span class="cstat-no" title="statement not covered" >r</span></span>eturn i(e)}</span>,e.exports=i=<span class="fstat-no" title="function not covered" >function m(e){<span class="cstat-no" title="statement not covered" ></span>var t;<span class="cstat-no" title="statement not covered" >i</span>f(this instanceof m)<span class="cstat-no" title="statement not covered" >throw new TypeError("TypeError: Symbol is not a constructor");<span class="cstat-no" title="statement not covered" >r</span></span>eturn t=a(s.prototype),e=void 0===e?"":String(e),c(t,{__description__:u("",e),__name__:u("",v(e))})}</span>,c(i,{"for":u(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>return h[e]?h[e]:h[e]=i(String(e))}</span>),keyFor:u(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>var t;<span class="cstat-no" title="statement not covered" >o</span>(e);<span class="cstat-no" title="statement not covered" >f</span>or(t in h)<span class="cstat-no" title="statement not covered" >if(h[t]===e)<span class="cstat-no" title="statement not covered" >return t}</span></span></span>),hasInstance:u("",r&amp;&amp;r.hasInstance||i("hasInstance")),isConcatSpreadable:u("",r&amp;&amp;r.isConcatSpreadable||i("isConcatSpreadable")),iterator:u("",r&amp;&amp;r.iterator||i("iterator")),match:u("",r&amp;&amp;r.match||i("match")),replace:u("",r&amp;&amp;r.replace||i("replace")),search:u("",r&amp;&amp;r.search||i("search")),species:u("",r&amp;&amp;r.species||i("species")),split:u("",r&amp;&amp;r.split||i("split")),toPrimitive:u("",r&amp;&amp;r.toPrimitive||i("toPrimitive")),toStringTag:u("",r&amp;&amp;r.toStringTag||i("toStringTag")),unscopables:u("",r&amp;&amp;r.unscopables||i("unscopables"))}),c(s.prototype,{constructor:u(i),toString:u("",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this.__name__}</span>)}),c(i.prototype,{toString:u(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"Symbol ("+o(this).__description__+")"}</span>),valueOf:u(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return o(this)}</span>)}),l(i.prototype,i.toPrimitive,u("",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return o(this)}</span>)),l(i.prototype,i.toStringTag,u("c","Symbol")),l(s.prototype,i.toPrimitive,u("c",i.prototype[i.toPrimitive])),l(s.prototype,i.toStringTag,u("c",i.prototype[i.toStringTag]))}</span>,<span class="fstat-no" title="function not covered" >function(e,t,n){</span>"use strict";<span class="cstat-no" title="statement not covered" >var r=n(13);<span class="cstat-no" title="statement not covered" >e</span>.exports=<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>if(!r(e))<span class="cstat-no" title="statement not covered" >throw new TypeError(e+" is not a symbol");<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>}</span>])});</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu May 12 2016 14:35:05 GMT+0800 (CST)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
